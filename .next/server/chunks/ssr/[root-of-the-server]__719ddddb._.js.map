{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/egz/Desktop/Gaming-NextJS/lib/auth.ts"],"sourcesContent":["import bcrypt from 'bcryptjs';\r\nimport jwt from 'jsonwebtoken';\r\n\r\nexport async function hashPassword(password: string): Promise<string> {\r\n    try {\r\n        const saltRounds = 10;\r\n        const hashedPassword = await bcrypt.hash(password, saltRounds);\r\n        return hashedPassword;\r\n    } catch (error) {\r\n        console.error('Error hashing password:', error);\r\n        throw new Error('Failed to hash password');\r\n    }\r\n}\r\n\r\nexport async function comparePassword(password: string, hashedPassword: string): Promise<boolean> {\r\n    try {\r\n        const isMatch = await bcrypt.compare(password, hashedPassword);\r\n        return isMatch;\r\n    } catch (error) {\r\n        console.error('Error comparing password:', error);\r\n        throw new Error('Failed to compare password');\r\n    }\r\n}\r\n\r\nexport function generateToken(payload: object): string {\r\n    try {\r\n        const secret = process.env.JWT_SECRET;\r\n        \r\n        if (!secret) {\r\n            throw new Error('JWT_SECRET is not defined in environment variables');\r\n        }\r\n        \r\n        const token = jwt.sign(payload, secret, { \r\n            expiresIn: '7d',\r\n            issuer: 'your-app-name' \r\n        });\r\n        \r\n        return token;\r\n    } catch (error) {\r\n        console.error('Error generating JWT token:', error);\r\n        throw new Error('Failed to generate token');\r\n    }\r\n}\r\n\r\nexport function verifyToken(token: string) {\r\n    try {\r\n        const secret = process.env.JWT_SECRET;\r\n        \r\n        if (!secret) {\r\n            throw new Error('JWT_SECRET is not defined in environment variables');\r\n        }\r\n        \r\n        const decoded = jwt.verify(token, secret);\r\n        return decoded;\r\n    } catch (error) {\r\n        console.error('Error verifying JWT token:', error);\r\n        throw new Error('Invalid or expired token');\r\n    }\r\n}\r\n\r\n// ===== CLIENT-SIDE FUNCTIONS (Add these) =====\r\n\r\n// Simple client-side JWT decoder (without verification for display purposes)\r\nexport function decodeToken(token: string) {\r\n    try {\r\n        const base64Url = token.split('.')[1];\r\n        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n        const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {\r\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n        }).join(''));\r\n        \r\n        return JSON.parse(jsonPayload);\r\n    } catch (error) {\r\n        console.error('Error decoding token:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\n// Check if token is expired\r\nexport function isTokenExpired(token: string): boolean {\r\n    try {\r\n        const decoded = decodeToken(token);\r\n        if (!decoded || !decoded.exp) return true;\r\n        \r\n        const currentTime = Date.now() / 1000;\r\n        return decoded.exp < currentTime;\r\n    } catch (error) {\r\n        return true;\r\n    }\r\n}\r\n\r\n// Get user data from token\r\nexport function getUserFromToken(token: string) {\r\n    try {\r\n        const decoded = decodeToken(token);\r\n        if (!decoded) return null;\r\n        \r\n        // Extract user data from token payload\r\n        return {\r\n            id: decoded.userId || decoded.id,\r\n            email: decoded.email,\r\n            name: decoded.name,\r\n            // Add other fields based on your token structure\r\n        };\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\n// Auth service for localStorage management\r\nexport class AuthService {\r\n    static TOKEN_KEY = 'auth-token';\r\n\r\n    static getToken(): string | null {\r\n        if (typeof window === 'undefined') return null;\r\n        return localStorage.getItem(this.TOKEN_KEY);\r\n    }\r\n\r\n    static setToken(token: string): void {\r\n        if (typeof window === 'undefined') return;\r\n        localStorage.setItem(this.TOKEN_KEY, token);\r\n    }\r\n\r\n    static removeToken(): void {\r\n        if (typeof window === 'undefined') return;\r\n        localStorage.removeItem(this.TOKEN_KEY);\r\n    }\r\n\r\n    static getCurrentUser() {\r\n        const token = this.getToken();\r\n        if (!token || isTokenExpired(token)) {\r\n            this.removeToken();\r\n            return null;\r\n        }\r\n        return getUserFromToken(token);\r\n    }\r\n\r\n    static isAuthenticated(): boolean {\r\n        const token = this.getToken();\r\n        return !!(token && !isTokenExpired(token));\r\n    }\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/egz/Desktop/Gaming-NextJS/hooks/useAuth.js"],"sourcesContent":["'use client';\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { AuthService } from \"../lib/auth\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function AuthProvider({ children }) {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [token, setToken] = useState(null);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            const savedToken = AuthService.getToken();\r\n            if (savedToken && AuthService.isAuthenticated()) {\r\n                const userData = AuthService.getCurrentUser();\r\n                setToken(savedToken);\r\n                setUser(userData);\r\n            } else {\r\n                AuthService.removeToken(); // Clean up expired token\r\n            }\r\n        } catch (error) {\r\n            console.error('Auth initialization error:', error);\r\n            AuthService.removeToken();\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const login = (userData, authToken) => {\r\n        setUser(userData);\r\n        setToken(authToken);\r\n        AuthService.setToken(authToken);\r\n    };\r\n\r\n    const register = (userData, authToken) => {\r\n        setUser(userData);\r\n        setToken(authToken);\r\n        AuthService.setToken(authToken);\r\n    };\r\n\r\n    const logout = () => {\r\n        setUser(null);\r\n        setToken(null);\r\n        AuthService.removeToken();\r\n    };\r\n\r\n    const value = {\r\n        user,\r\n        token,\r\n        loading,\r\n        login,\r\n        logout,\r\n        register,\r\n        isAuthenticated: !!user && AuthService.isAuthenticated(),\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\n\r\nexport  function useAuth() {\r\n    const context = useContext(AuthContext);\r\n\r\n    if (!context) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD;AAEzB,SAAS,aAAa,EAAE,QAAQ,EAAE;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEnC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,IAAI;YACA,MAAM,aAAa,2GAAA,CAAA,cAAW,CAAC,QAAQ;YACvC,IAAI,cAAc,2GAAA,CAAA,cAAW,CAAC,eAAe,IAAI;gBAC7C,MAAM,WAAW,2GAAA,CAAA,cAAW,CAAC,cAAc;gBAC3C,SAAS;gBACT,QAAQ;YACZ,OAAO;gBACH,2GAAA,CAAA,cAAW,CAAC,WAAW,IAAI,yBAAyB;YACxD;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,2GAAA,CAAA,cAAW,CAAC,WAAW;QAC3B,SAAU;YACN,WAAW;QACf;IACJ,GAAG,EAAE;IAEL,MAAM,QAAQ,CAAC,UAAU;QACrB,QAAQ;QACR,SAAS;QACT,2GAAA,CAAA,cAAW,CAAC,QAAQ,CAAC;IACzB;IAEA,MAAM,WAAW,CAAC,UAAU;QACxB,QAAQ;QACR,SAAS;QACT,2GAAA,CAAA,cAAW,CAAC,QAAQ,CAAC;IACzB;IAEA,MAAM,SAAS;QACX,QAAQ;QACR,SAAS;QACT,2GAAA,CAAA,cAAW,CAAC,WAAW;IAC3B;IAEA,MAAM,QAAQ;QACV;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,CAAC,CAAC,QAAQ,2GAAA,CAAA,cAAW,CAAC,eAAe;IAC1D;IAEA,qBACI,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBACxB;;;;;;AAGb;AAGQ,SAAS;IACb,MAAM,UAAU,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE;IAE3B,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX","debugId":null}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/egz/Desktop/Gaming-NextJS/app/components/Navbar.tsx"],"sourcesContent":["        \"use client\";\r\n        import React, { useEffect } from \"react\";\r\n        import { useAuth } from \"@/hooks/useAuth\";\r\n        import { useRouter } from \"next/navigation\";\r\n        import Link from \"next/link\";\r\n        import {AuthService} from '@/lib/auth'\r\n\r\n\r\n        const Navbar = () => {\r\n        const { user, login, logout, loading } = useAuth();\r\n        const router = useRouter();\r\n\r\n        useEffect(() => {\r\n            const checkAuth = async () => {\r\n            const token = AuthService.getToken();\r\n            if (!token) {\r\n                return;\r\n            }\r\n\r\n            try {\r\n                const res = await fetch(\"/api/auth/verify\", {\r\n                method: \"GET\",\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`,\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                });\r\n\r\n                if (res.ok) {\r\n                const data = await res.json();\r\n                login(data.user , token);\r\n                } \r\n            } catch (error) {\r\n                // localStorage.removeItem(\"auth-token\");\r\n                logout()\r\n                \r\n            }\r\n            };\r\n            if(!loading && !user) {\r\n                checkAuth();\r\n            }\r\n        }, [user, loading, login, logout]);\r\n        if(loading) {\r\n            return <div>Loading...</div>\r\n        }\r\n\r\n    return (\r\n    <div className=\"container mx-auto py-4\">\r\n        <nav className=\"bg-white/10 backdrop-blur-md rounded-full shadow-lg px-6 py-3 flex items-center justify-between border border-white/20\">\r\n        \r\n        <div>\r\n            <Link href=\"/Games\" className=\"text-xl font-bold text-white hover:text-purple-300 transition-colors px-4\">\r\n            MyApp\r\n            </Link>\r\n        </div>\r\n\r\n        \r\n        <div className=\"flex items-center space-x-4\">\r\n            {!user ? (\r\n            <>\r\n                <Link href=\"/login\" className=\"text-white hover:text-purple-300 transition-colors px-3\">\r\n                Login\r\n                </Link>\r\n                <Link href=\"/register\" className=\"text-white hover:text-purple-300 transition-colors px-3\">\r\n                Register\r\n                </Link>\r\n            </>\r\n            ) : (\r\n            <>\r\n                <button onClick={logout} className=\"text-white hover:text-red-300 transition-colors px-3 cursor-pointer\">\r\n                Logout\r\n                </button>\r\n                <Link\r\n                href=\"/profile\"\r\n                className=\"group p-2 text-white hover:text-purple-300 transition-all duration-300 hover:scale-110 hover:-translate-y-0.5\"\r\n                >\r\n                <svg\r\n                    className=\"w-6 h-6 group-hover:rotate-12 transition-transform duration-300\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                >\r\n                    <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\r\n                    />\r\n                </svg>\r\n                </Link>\r\n            </>\r\n            )}\r\n        </div>\r\n        </nav>\r\n    </div>\r\n    );\r\n\r\n        };\r\n\r\n        export default Navbar;\r\n"],"names":[],"mappings":";;;;AACQ;AACA;AACA;AACA;AACA;AALA;;;;;;;AAQA,MAAM,SAAS;IACf,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,gHAAA,CAAA,UAAO,AAAD;IAC/C,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,YAAY;YAClB,MAAM,QAAQ,2GAAA,CAAA,cAAW,CAAC,QAAQ;YAClC,IAAI,CAAC,OAAO;gBACR;YACJ;YAEA,IAAI;gBACA,MAAM,MAAM,MAAM,MAAM,oBAAoB;oBAC5C,QAAQ;oBACR,SAAS;wBACL,eAAe,CAAC,OAAO,EAAE,OAAO;wBAChC,gBAAgB;oBACpB;gBACA;gBAEA,IAAI,IAAI,EAAE,EAAE;oBACZ,MAAM,OAAO,MAAM,IAAI,IAAI;oBAC3B,MAAM,KAAK,IAAI,EAAG;gBAClB;YACJ,EAAE,OAAO,OAAO;gBACZ,yCAAyC;gBACzC;YAEJ;QACA;QACA,IAAG,CAAC,WAAW,CAAC,MAAM;YAClB;QACJ;IACJ,GAAG;QAAC;QAAM;QAAS;QAAO;KAAO;IACjC,IAAG,SAAS;QACR,qBAAO,8OAAC;sBAAI;;;;;;IAChB;IAEJ,qBACA,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;;8BAEf,8OAAC;8BACG,cAAA,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAS,WAAU;kCAA4E;;;;;;;;;;;8BAM9G,8OAAC;oBAAI,WAAU;8BACV,CAAC,qBACF;;0CACI,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAS,WAAU;0CAA0D;;;;;;0CAGxF,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAY,WAAU;0CAA0D;;;;;;;qDAK/F;;0CACI,8OAAC;gCAAO,SAAS;gCAAQ,WAAU;0CAAsE;;;;;;0CAGzG,8OAAC,4JAAA,CAAA,UAAI;gCACL,MAAK;gCACL,WAAU;0CAEV,cAAA,8OAAC;oCACG,WAAU;oCACV,MAAK;oCACL,QAAO;oCACP,SAAQ;8CAER,cAAA,8OAAC;wCACD,eAAc;wCACd,gBAAe;wCACf,aAAa;wCACb,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWd;uCAEe","debugId":null}},
    {"offset": {"line": 450, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/egz/Desktop/Gaming-NextJS/app/components/LayoutWrapper.tsx"],"sourcesContent":["    // components/LayoutWrapper.tsx\r\n    \"use client\"\r\n\r\n    import { usePathname } from 'next/navigation'\r\n    import Navbar from './Navbar'\r\n\r\n    export default function LayoutWrapper({ children }: { children: React.ReactNode }) {\r\n    const pathname = usePathname()\r\n    const isHome = pathname === \"/\"\r\n\r\n    return (\r\n        <>\r\n        {!isHome && <Navbar />}\r\n        {children}\r\n        </>\r\n    )\r\n    }\r\n    // This component wraps the children components and conditionally renders the Navbar based on the current path."],"names":[],"mappings":"AAAI,+BAA+B;;;;;AAG/B;AACA;AAHA;;;;AAKe,SAAS,cAAc,EAAE,QAAQ,EAAiC;IACjF,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,SAAS,aAAa;IAE5B,qBACI;;YACC,CAAC,wBAAU,8OAAC,4HAAA,CAAA,UAAM;;;;;YAClB;;;AAGL,EACA,+GAA+G","debugId":null}}]
}