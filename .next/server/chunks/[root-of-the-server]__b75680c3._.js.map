{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/egz/Desktop/Gaming-NextJS/lib/db.ts"],"sourcesContent":["    import mongoose from 'mongoose';\r\n\r\n    const MONGODB_URI = process.env.MONGODB_URI;\r\n\r\n    if (!MONGODB_URI) {\r\n    throw new Error('Please define the MONGODB_URI environment variable inside .env.local');\r\n    }\r\n\r\n    // Global cache to prevent multiple connections in development\r\n    declare global {\r\n    var mongoose: any;\r\n    }\r\n\r\n    let cached = global.mongoose;\r\n\r\n    if (!cached) {\r\n    cached = global.mongoose = { conn: null, promise: null };\r\n    }\r\n\r\n    async function connectDB() {\r\n    try {\r\n        if (cached.conn) {\r\n        console.log('üì¶ Using cached database connection');\r\n        return cached.conn;\r\n        }\r\n\r\n        if (!cached.promise) {\r\n        const opts = {\r\n            bufferCommands: false,\r\n        };\r\n\r\n        console.log('üîó Creating new database connection...');\r\n        cached.promise = mongoose.connect(MONGODB_URI!, opts).then((mongoose) => {\r\n            console.log('‚úÖ MongoDB connected successfully');\r\n            return mongoose;\r\n        });\r\n        }\r\n\r\n        cached.conn = await cached.promise;\r\n        return cached.conn;\r\n    } catch (error) {\r\n        console.error('‚ùå MongoDB connection error:', error);\r\n        throw new Error('Failed to connect to MongoDB');\r\n    }\r\n    }\r\n\r\n    export default connectDB;"],"names":[],"mappings":";;;AAAI;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAClB,MAAM,IAAI,MAAM;AAChB;AAOA,IAAI,SAAS,OAAO,QAAQ;AAE5B,IAAI,CAAC,QAAQ;IACb,SAAS,OAAO,QAAQ,GAAG;QAAE,MAAM;QAAM,SAAS;IAAK;AACvD;AAEA,eAAe;IACf,IAAI;QACA,IAAI,OAAO,IAAI,EAAE;YACjB,QAAQ,GAAG,CAAC;YACZ,OAAO,OAAO,IAAI;QAClB;QAEA,IAAI,CAAC,OAAO,OAAO,EAAE;YACrB,MAAM,OAAO;gBACT,gBAAgB;YACpB;YAEA,QAAQ,GAAG,CAAC;YACZ,OAAO,OAAO,GAAG,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC,aAAc,MAAM,IAAI,CAAC,CAAC;gBACxD,QAAQ,GAAG,CAAC;gBACZ,OAAO;YACX;QACA;QAEA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;QAClC,OAAO,OAAO,IAAI;IACtB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM,IAAI,MAAM;IACpB;AACA;uCAEe","debugId":null}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/egz/Desktop/Gaming-NextJS/models/User.ts"],"sourcesContent":["    import mongoose, { Document, Schema } from 'mongoose';\r\n\r\n    export interface IUser extends Document {\r\n    username: string;\r\n    email: string;\r\n    password: string;\r\n    createdAt: Date;\r\n    updatedAt: Date;\r\n    }\r\n\r\n    const UserSchema: Schema = new Schema({\r\n    username: {\r\n        type: String,\r\n        required: [true, 'Username is required'],\r\n        trim: true,\r\n        minlength: [2, 'Username must be at least 2 characters long'],\r\n        maxlength: [50, 'Username must be less than 50 characters']\r\n    },\r\n    email: {\r\n        type: String,\r\n        required: [true, 'Email is required'],\r\n        unique: true,\r\n        lowercase: true,\r\n        trim: true,\r\n        match: [/^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/, 'Please enter a valid email']\r\n    },\r\n    password: {\r\n        type: String,\r\n        required: [true, 'Password is required'],\r\n        minlength: [6, 'Password must be at least 6 characters long']\r\n    }\r\n    }, {\r\n    timestamps: true // This automatically adds createdAt and updatedAt fields\r\n    });\r\n\r\n    // Prevent re-compilation during development\r\n    export default mongoose.models.User || mongoose.model<IUser>('User', UserSchema);"],"names":[],"mappings":";;;AAAI;;AAUA,MAAM,aAAqB,IAAI,yGAAA,CAAA,SAAM,CAAC;IACtC,UAAU;QACN,MAAM;QACN,UAAU;YAAC;YAAM;SAAuB;QACxC,MAAM;QACN,WAAW;YAAC;YAAG;SAA8C;QAC7D,WAAW;YAAC;YAAI;SAA2C;IAC/D;IACA,OAAO;QACH,MAAM;QACN,UAAU;YAAC;YAAM;SAAoB;QACrC,QAAQ;QACR,WAAW;QACX,MAAM;QACN,OAAO;YAAC;YAA+C;SAA6B;IACxF;IACA,UAAU;QACN,MAAM;QACN,UAAU;YAAC;YAAM;SAAuB;QACxC,WAAW;YAAC;YAAG;SAA8C;IACjE;AACA,GAAG;IACH,YAAY,KAAK,yDAAyD;AAC1E;uCAGe,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAQ,QAAQ","debugId":null}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/egz/Desktop/Gaming-NextJS/lib/auth.ts"],"sourcesContent":["import bcrypt from 'bcryptjs';\r\nimport jwt from 'jsonwebtoken';\r\n\r\nexport async function hashPassword(password: string): Promise<string> {\r\n    try {\r\n        const saltRounds = 10;\r\n        const hashedPassword = await bcrypt.hash(password, saltRounds);\r\n        return hashedPassword;\r\n    } catch (error) {\r\n        console.error('Error hashing password:', error);\r\n        throw new Error('Failed to hash password');\r\n    }\r\n}\r\n\r\nexport async function comparePassword(password: string, hashedPassword: string): Promise<boolean> {\r\n    try {\r\n        const isMatch = await bcrypt.compare(password, hashedPassword);\r\n        return isMatch;\r\n    } catch (error) {\r\n        console.error('Error comparing password:', error);\r\n        throw new Error('Failed to compare password');\r\n    }\r\n}\r\n\r\nexport function generateToken(payload: object): string {\r\n    try {\r\n        const secret = process.env.JWT_SECRET;\r\n        \r\n        if (!secret) {\r\n            throw new Error('JWT_SECRET is not defined in environment variables');\r\n        }\r\n        \r\n        const token = jwt.sign(payload, secret, { \r\n            expiresIn: '7d',\r\n            issuer: 'your-app-name' \r\n        });\r\n        \r\n        return token;\r\n    } catch (error) {\r\n        console.error('Error generating JWT token:', error);\r\n        throw new Error('Failed to generate token');\r\n    }\r\n}\r\n\r\nexport function verifyToken(token: string) {\r\n    try {\r\n        const secret = process.env.JWT_SECRET;\r\n        \r\n        if (!secret) {\r\n            throw new Error('JWT_SECRET is not defined in environment variables');\r\n        }\r\n        \r\n        const decoded = jwt.verify(token, secret);\r\n        return decoded;\r\n    } catch (error) {\r\n        console.error('Error verifying JWT token:', error);\r\n        throw new Error('Invalid or expired token');\r\n    }\r\n}\r\n\r\n// ===== CLIENT-SIDE FUNCTIONS (Add these) =====\r\n\r\n// Simple client-side JWT decoder (without verification for display purposes)\r\nexport function decodeToken(token: string) {\r\n    try {\r\n        const base64Url = token.split('.')[1];\r\n        const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n        const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {\r\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n        }).join(''));\r\n        \r\n        return JSON.parse(jsonPayload);\r\n    } catch (error) {\r\n        console.error('Error decoding token:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\n// Check if token is expired\r\nexport function isTokenExpired(token: string): boolean {\r\n    try {\r\n        const decoded = decodeToken(token);\r\n        if (!decoded || !decoded.exp) return true;\r\n        \r\n        const currentTime = Date.now() / 1000;\r\n        return decoded.exp < currentTime;\r\n    } catch (error) {\r\n        return true;\r\n    }\r\n}\r\n\r\n// Get user data from token\r\nexport function getUserFromToken(token: string) {\r\n    try {\r\n        const decoded = decodeToken(token);\r\n        if (!decoded) return null;\r\n        \r\n        // Extract user data from token payload\r\n        return {\r\n            id: decoded.userId || decoded.id,\r\n            email: decoded.email,\r\n            name: decoded.name,\r\n            // Add other fields based on your token structure\r\n        };\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\n// Auth service for localStorage management\r\nexport class AuthService {\r\n    static TOKEN_KEY = 'auth-token';\r\n\r\n    static getToken(): string | null {\r\n        if (typeof window === 'undefined') return null;\r\n        return localStorage.getItem(this.TOKEN_KEY);\r\n    }\r\n\r\n    static setToken(token: string): void {\r\n        if (typeof window === 'undefined') return;\r\n        localStorage.setItem(this.TOKEN_KEY, token);\r\n    }\r\n\r\n    static removeToken(): void {\r\n        if (typeof window === 'undefined') return;\r\n        localStorage.removeItem(this.TOKEN_KEY);\r\n    }\r\n\r\n    static getCurrentUser() {\r\n        const token = this.getToken();\r\n        if (!token || isTokenExpired(token)) {\r\n            this.removeToken();\r\n            return null;\r\n        }\r\n        return getUserFromToken(token);\r\n    }\r\n\r\n    static isAuthenticated(): boolean {\r\n        const token = this.getToken();\r\n        return !!(token && !isTokenExpired(token));\r\n    }\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 335, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/egz/Desktop/Gaming-NextJS/app/api/auth/register/route.ts"],"sourcesContent":["    import { NextResponse } from 'next/server';\r\n    import connectDB from '@/lib/db';\r\n    import User from '@/models/User';\r\n    import { hashPassword, generateToken } from '@/lib/auth';\r\n\r\n    export async function POST(req: Request) {\r\n    console.log('üöÄ Registration route called');\r\n    \r\n    try {\r\n        // Step 1: Parse request body\r\n        console.log('üì• Parsing request body...');\r\n        const { username, email, password } = await req.json();\r\n        console.log('üìã Request data:', { username, email, password: '***' });\r\n\r\n        // Step 2: Connect to database\r\n        console.log('üîó Connecting to database...');\r\n        await connectDB();\r\n        console.log('‚úÖ Database connected successfully');\r\n\r\n        // Step 3: Validate input\r\n        if (!username || !email || !password) {\r\n        console.log('‚ùå Missing fields validation failed');\r\n        return NextResponse.json({ message: 'Missing fields' }, { status: 400 });\r\n        }\r\n\r\n        // Step 4: Check existing user\r\n        console.log('üîç Checking for existing user...');\r\n        const existing = await User.findOne({ email });\r\n        if (existing) {\r\n        console.log('‚ùå User already exists');\r\n        return NextResponse.json({ message: 'User already exists' }, { status: 400 });\r\n        }\r\n        console.log('‚úÖ No existing user found');\r\n\r\n        // Step 5: Hash password\r\n        console.log('üîê Hashing password...');\r\n        const hashed = await hashPassword(password);\r\n        console.log('‚úÖ Password hashed successfully');\r\n\r\n        // Step 6: Create user\r\n        console.log('üë§ Creating new user...');\r\n        const newUser = await User.create({ username, email, password: hashed });\r\n        console.log('‚úÖ User created:', { id: newUser._id, email: newUser.email });\r\n\r\n        // Step 7: Generate token\r\n        console.log('üé´ Generating JWT token...');\r\n        const token = generateToken({ userId: newUser._id });\r\n        console.log('‚úÖ Token generated successfully');\r\n\r\n        console.log('üéâ Registration completed successfully');\r\n        return NextResponse.json({\r\n        user: { id: newUser._id, email: newUser.email, username: newUser.username },\r\n        token,\r\n        }, { status: 201 });\r\n\r\n    } catch (err: any) {\r\n        console.error('üí• Registration error details:');\r\n        console.error('Error name:', err.name);\r\n        console.error('Error message:', err.message);\r\n        console.error('Error stack:', err.stack);\r\n        \r\n        // Log specific error types\r\n        if (err.name === 'ValidationError') {\r\n        console.error('Mongoose validation error:', err.errors);\r\n        }\r\n        if (err.name === 'MongoError' || err.name === 'MongoServerError') {\r\n        console.error('MongoDB error code:', err.code);\r\n        }\r\n        if (err.message?.includes('JWT_SECRET')) {\r\n        console.error('JWT_SECRET environment variable issue');\r\n        }\r\n        \r\n        return NextResponse.json({ \r\n        message: 'Internal server error',\r\n        error: process.env.NODE_ENV === 'development' ? err.message : undefined\r\n        }, { status: 500 });\r\n    }\r\n    }"],"names":[],"mappings":";;;AAAI;AACA;AACA;AACA;;;;;AAEO,eAAe,KAAK,GAAY;IACvC,QAAQ,GAAG,CAAC;IAEZ,IAAI;QACA,6BAA6B;QAC7B,QAAQ,GAAG,CAAC;QACZ,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QACpD,QAAQ,GAAG,CAAC,oBAAoB;YAAE;YAAU;YAAO,UAAU;QAAM;QAEnE,8BAA8B;QAC9B,QAAQ,GAAG,CAAC;QACZ,MAAM,CAAA,GAAA,2GAAA,CAAA,UAAS,AAAD;QACd,QAAQ,GAAG,CAAC;QAEZ,yBAAyB;QACzB,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,UAAU;YACtC,QAAQ,GAAG,CAAC;YACZ,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAiB,GAAG;gBAAE,QAAQ;YAAI;QACtE;QAEA,8BAA8B;QAC9B,QAAQ,GAAG,CAAC;QACZ,MAAM,WAAW,MAAM,gHAAA,CAAA,UAAI,CAAC,OAAO,CAAC;YAAE;QAAM;QAC5C,IAAI,UAAU;YACd,QAAQ,GAAG,CAAC;YACZ,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAsB,GAAG;gBAAE,QAAQ;YAAI;QAC3E;QACA,QAAQ,GAAG,CAAC;QAEZ,wBAAwB;QACxB,QAAQ,GAAG,CAAC;QACZ,MAAM,SAAS,MAAM,CAAA,GAAA,6GAAA,CAAA,eAAY,AAAD,EAAE;QAClC,QAAQ,GAAG,CAAC;QAEZ,sBAAsB;QACtB,QAAQ,GAAG,CAAC;QACZ,MAAM,UAAU,MAAM,gHAAA,CAAA,UAAI,CAAC,MAAM,CAAC;YAAE;YAAU;YAAO,UAAU;QAAO;QACtE,QAAQ,GAAG,CAAC,mBAAmB;YAAE,IAAI,QAAQ,GAAG;YAAE,OAAO,QAAQ,KAAK;QAAC;QAEvE,yBAAyB;QACzB,QAAQ,GAAG,CAAC;QACZ,MAAM,QAAQ,CAAA,GAAA,6GAAA,CAAA,gBAAa,AAAD,EAAE;YAAE,QAAQ,QAAQ,GAAG;QAAC;QAClD,QAAQ,GAAG,CAAC;QAEZ,QAAQ,GAAG,CAAC;QACZ,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACzB,MAAM;gBAAE,IAAI,QAAQ,GAAG;gBAAE,OAAO,QAAQ,KAAK;gBAAE,UAAU,QAAQ,QAAQ;YAAC;YAC1E;QACA,GAAG;YAAE,QAAQ;QAAI;IAErB,EAAE,OAAO,KAAU;QACf,QAAQ,KAAK,CAAC;QACd,QAAQ,KAAK,CAAC,eAAe,IAAI,IAAI;QACrC,QAAQ,KAAK,CAAC,kBAAkB,IAAI,OAAO;QAC3C,QAAQ,KAAK,CAAC,gBAAgB,IAAI,KAAK;QAEvC,2BAA2B;QAC3B,IAAI,IAAI,IAAI,KAAK,mBAAmB;YACpC,QAAQ,KAAK,CAAC,8BAA8B,IAAI,MAAM;QACtD;QACA,IAAI,IAAI,IAAI,KAAK,gBAAgB,IAAI,IAAI,KAAK,oBAAoB;YAClE,QAAQ,KAAK,CAAC,uBAAuB,IAAI,IAAI;QAC7C;QACA,IAAI,IAAI,OAAO,EAAE,SAAS,eAAe;YACzC,QAAQ,KAAK,CAAC;QACd;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACzB,SAAS;YACT,OAAO,uCAAyC,IAAI,OAAO;QAC3D,GAAG;YAAE,QAAQ;QAAI;IACrB;AACA","debugId":null}}]
}